<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.40.2" />
    <meta name="description" content="Getting latitude and longitude from addresses">
<meta name="author" content="Andrew Ba Tran">

    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/images/favicon.png" type="image/x-icon" />
    <title>Geolocating data :: Journalism with R</title>
    
    
    <link href="/css/nucleus.css?1541338754" rel="stylesheet">
    <link href="/css/font-awesome.min.css?1541338754" rel="stylesheet">
    <link href="/css/hybrid.css?1541338754" rel="stylesheet">
    <link href="/css/featherlight.min.css?1541338754" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1541338754" rel="stylesheet">
    <link href="/css/auto-complete.css?1541338754" rel="stylesheet">
    <link href="/css/theme.css?1541338754" rel="stylesheet">
    <link href="/css/hugo-theme.css?1541338754" rel="stylesheet">
    
      <link href="/css/theme-mine.css?1541338754" rel="stylesheet">
    

    <script src="/js/jquery-2.x.min.js?1541338754"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/en/mapping/geolocating/geolocating/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <div style="max-width:150px; margin-left:auto; margin-right:auto;"><a id="logo" href="https://learn.r-journalism.com"> 
  <img src="/images/badge.png">
</a>
</div>
    </div>
    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/en/introduction/" title="Getting started" class="dd-item 
        
        
        
        ">
      <a href="/en/introduction/">
          Getting started
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/en/introduction/from_excel/from-excel-to-r/" title="Evolve from Excel to R" class="dd-item ">
        <a href="/en/introduction/from_excel/from-excel-to-r/">
        Evolve from Excel to R
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/introduction/what_is_r/what-is-r/" title="What is R" class="dd-item ">
        <a href="/en/introduction/what_is_r/what-is-r/">
        What is R
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/introduction/installing_r/installing-r/" title="Installing R" class="dd-item ">
        <a href="/en/introduction/installing_r/installing-r/">
        Installing R
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/introduction/installing_rstudio/installing-rstudio/" title="Installing RStudio" class="dd-item ">
        <a href="/en/introduction/installing_rstudio/installing-rstudio/">
        Installing RStudio
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/en/how_to_use_r/" title="How to use R" class="dd-item 
        
        
        
        ">
      <a href="/en/how_to_use_r/">
          <b>1. </b>How to use R
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/en/how_to_use_r/tour_rstudio/rstudio-tour/" title="RStudio guide" class="dd-item ">
        <a href="/en/how_to_use_r/tour_rstudio/rstudio-tour/">
        RStudio guide
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/how_to_use_r/intro_to_r/intro-to-r/" title="Introduction to R" class="dd-item ">
        <a href="/en/how_to_use_r/intro_to_r/intro-to-r/">
        Introduction to R
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/how_to_use_r/initial_exploration/data-structures/" title="Data structures in R" class="dd-item ">
        <a href="/en/how_to_use_r/initial_exploration/data-structures/">
        Data structures in R
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/how_to_use_r/project_for_class/class-project/" title="Setting up for this class" class="dd-item ">
        <a href="/en/how_to_use_r/project_for_class/class-project/">
        Setting up for this class
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/how_to_use_r/syntax/r-syntax/" title="R basics, help, mistakes" class="dd-item ">
        <a href="/en/how_to_use_r/syntax/r-syntax/">
        R basics, help, mistakes
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/en/importing_exporting/" title="Importing/Exporting data" class="dd-item 
        
        
        
        ">
      <a href="/en/importing_exporting/">
          <b>2. </b>Importing/Exporting data
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/en/importing_exporting/csv/csv-files/" title="CSV files" class="dd-item ">
        <a href="/en/importing_exporting/csv/csv-files/">
        CSV files
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/importing_exporting/excel/excel-files/" title="Excel files" class="dd-item ">
        <a href="/en/importing_exporting/excel/excel-files/">
        Excel files
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/importing_exporting/delimited_text/delimited-text/" title="Delimited Text" class="dd-item ">
        <a href="/en/importing_exporting/delimited_text/delimited-text/">
        Delimited Text
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/importing_exporting/json/json-files/" title="JSON data" class="dd-item ">
        <a href="/en/importing_exporting/json/json-files/">
        JSON data
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/importing_exporting/spss/spss-files/" title="SPSS data" class="dd-item ">
        <a href="/en/importing_exporting/spss/spss-files/">
        SPSS data
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/importing_exporting/copying_pasting/copying-pasting/" title="Copying and pasting data" class="dd-item ">
        <a href="/en/importing_exporting/copying_pasting/copying-pasting/">
        Copying and pasting data
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/importing_exporting/folder_of_files/bulk-files/" title="Folder of files" class="dd-item ">
        <a href="/en/importing_exporting/folder_of_files/bulk-files/">
        Folder of files
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/en/wrangling/" title="Wrangling data" class="dd-item 
        
        
        
        ">
      <a href="/en/wrangling/">
          <b>3. </b>Wrangling data
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/en/wrangling/dplyr/dplyr/" title="Transforming and analyzing data" class="dd-item ">
        <a href="/en/wrangling/dplyr/dplyr/">
        Transforming and analyzing data
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/wrangling/tidyr_joins/tidyr-joins/" title="Tidying and joining data" class="dd-item ">
        <a href="/en/wrangling/tidyr_joins/tidyr-joins/">
        Tidying and joining data
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/wrangling/case_study/murders-case-study/" title="Murders case study" class="dd-item ">
        <a href="/en/wrangling/case_study/murders-case-study/">
        Murders case study
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/wrangling/strings/strings/" title="Handling strings" class="dd-item ">
        <a href="/en/wrangling/strings/strings/">
        Handling strings
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/wrangling/dates/dates/" title="Dealing with dates" class="dd-item ">
        <a href="/en/wrangling/dates/dates/">
        Dealing with dates
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/en/visualizing/" title="Visualizing data" class="dd-item 
        
        
        
        ">
      <a href="/en/visualizing/">
          <b>4. </b>Visualizing data
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/en/visualizing/charts_with_ggplot/ggplot2/" title="Charts with ggplot2" class="dd-item ">
        <a href="/en/visualizing/charts_with_ggplot/ggplot2/">
        Charts with ggplot2
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/visualizing/customizing_charts/customizing-exporting-ggplot2/" title="Customizing charts" class="dd-item ">
        <a href="/en/visualizing/customizing_charts/customizing-exporting-ggplot2/">
        Customizing charts
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/visualizing/more_charts/fancy-charts/" title="More charts" class="dd-item ">
        <a href="/en/visualizing/more_charts/fancy-charts/">
        More charts
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/en/mapping/" title="Spatial analysis" class="dd-item 
        parent
        
        
        ">
      <a href="/en/mapping/">
          <b>5. </b>Spatial analysis
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/en/mapping/static_maps/static-maps/" title="Static maps" class="dd-item ">
        <a href="/en/mapping/static_maps/static-maps/">
        Static maps
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/mapping/geolocating/geolocating/" title="Geolocating data" class="dd-item active">
        <a href="/en/mapping/geolocating/geolocating/">
        Geolocating data
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/mapping/case_study/traffic-stops/" title="Traffic stops case study" class="dd-item ">
        <a href="/en/mapping/case_study/traffic-stops/">
        Traffic stops case study
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/mapping/leaflet_maps/leaflet/" title="Interactive maps with Leaflet" class="dd-item ">
        <a href="/en/mapping/leaflet_maps/leaflet/">
        Interactive maps with Leaflet
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/mapping/census_maps/census-maps/" title="Interactive choropleth maps" class="dd-item ">
        <a href="/en/mapping/census_maps/census-maps/">
        Interactive choropleth maps
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/en/publishing/" title="Publishing" class="dd-item 
        
        
        
        ">
      <a href="/en/publishing/">
          <b>6. </b>Publishing
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/en/publishing/rmarkdown/rmarkdown/" title="RMarkdown" class="dd-item ">
        <a href="/en/publishing/rmarkdown/rmarkdown/">
        RMarkdown
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/publishing/more_rmarkdown/more-rmarkdown/" title="More R Markdown" class="dd-item ">
        <a href="/en/publishing/more_rmarkdown/more-rmarkdown/">
        More R Markdown
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/publishing/workflow/r-projects/" title="Setting up an R workflow" class="dd-item ">
        <a href="/en/publishing/workflow/r-projects/">
        Setting up an R workflow
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/en/git/" title="Git" class="dd-item 
        
        
        
        ">
      <a href="/en/git/">
          <b>7. </b>Git
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/en/git/installing_git/installing-git/" title="Installing git" class="dd-item ">
        <a href="/en/git/installing_git/installing-git/">
        Installing git
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/git/git/git/" title="Setting up, using Git" class="dd-item ">
        <a href="/en/git/git/git/">
        Setting up, using Git
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/git/github/github/" title="Connecting to GitHub" class="dd-item ">
        <a href="/en/git/github/github/">
        Connecting to GitHub
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/git/github_pages/github-pages/" title="Best practices for GitHub" class="dd-item ">
        <a href="/en/git/github_pages/github-pages/">
        Best practices for GitHub
        <i class="fa fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/en/faq/" title="FAQ" class="dd-item 
        
        
        
        ">
      <a href="/en/faq/">
          FAQ
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://r-journalism.com"><i class='fa fa-fw fa-bookmark'></i> R Journalism Case Studies</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://github.com/r-journalism/learn-r-journalism"><i class='fa fa-fw fa-github'></i> Github repo</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://learn.r-journalism.com/en/about"><i class='fa fa-fw fa-bullhorn'></i> About</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
       
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fa fa-fw fa-history"></i> Clear History</a></li>         
      
      </ul>
    </section>
    
    <section id="footer">
      
    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/r-journalism/learn-r-journalism/edit/master/content/mapping/geolocating/2018-05-27-geolocating-data.html" target="blank">
                      <i class="fa fa-code-fork"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/en/'>R for Journalists</a> > <a href='/en/mapping/'>Spatial analysis</a> > Geolocating data
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">

    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Geolocating data</h1>
          

        


<div id="geolocating-addresses-in-r" class="section level3">
<h3>Geolocating addresses in R</h3>

<h4>NOTE: This section needs to be updated because Google has started implementing stricter API requirements. They now require an API key. So parts of the code below will NOT work. There are <a href="https://github.com/dkahle/ggmap/issues/213">some work arounds</a> but I'm waiting for things to settle a bit in the code before updating this.</h4>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
<p><iframe src="//www.youtube.com/embed/hTEQLk0dOZM?t=3s" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0; encrypted-media" allowfullscreen title="YouTube Video"></iframe></p>
</div>
<p>We’re going to start with geolocating municipal police stations in Connecticut.</p>
<p>We’ll be using the <a href="https://github.com/dkahle/ggmap"><code>ggmap</code> package</a> for a lot of functions, starting with geolocating addresses with Google Maps.</p>
<pre class="r"><code># if you don&#39;t have the following packages installed, uncomment and run the lines below

#install.packages(c(&quot;dplyr&quot;, &quot;ggplot2&quot;, &quot;tidyr&quot;, &quot;ggmap&quot;, &quot;DT&quot;, &quot;knitr&quot;, &quot;readr&quot;))

library(readr)
library(dplyr)
library(ggplot2)
library(tidyr)
library(ggmap)
library(DT)
library(knitr)</code></pre>
<p>After we import the data, let’s use the <code>glimpse()</code> function which lists out the variables for the data frame.</p>
<pre class="r"><code>stations &lt;- read_csv(&quot;data/Police_Departments.csv&quot;)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   NAME = col_character(),
##   DESCRIPTION = col_character(),
##   TELEPHONE = col_character(),
##   ADDRESS = col_character(),
##   ADDRESS2 = col_character(),
##   CITY = col_character(),
##   STATE = col_character(),
##   ZIP = col_integer(),
##   ZIPP4 = col_integer()
## )</code></pre>
<pre class="r"><code>glimpse(stations)</code></pre>
<pre><code>## Observations: 185
## Variables: 9
## $ NAME        &lt;chr&gt; &quot;AMTRAK POLICE DEPARTMENT&quot;, &quot;ANDOVER POLICE DEPART...
## $ DESCRIPTION &lt;chr&gt; &quot;OTHER&quot;, &quot;MUNICIPAL&quot;, &quot;COLLEGE OR UNIVERSITY&quot;, &quot;CO...
## $ TELEPHONE   &lt;chr&gt; &quot;203-773-6000&quot;, &quot;860-742-0235&quot;, &quot;860-405-9088&quot;, &quot;8...
## $ ADDRESS     &lt;chr&gt; &quot;50 UNION AVENUE&quot;, &quot;17 SCHOOL ROAD&quot;, &quot;1084 SHENNEC...
## $ ADDRESS2    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ CITY        &lt;chr&gt; &quot;NEW HAVEN&quot;, &quot;ANDOVER&quot;, &quot;GROTON&quot;, &quot;HARTFORD&quot;, &quot;NEW...
## $ STATE       &lt;chr&gt; &quot;CT&quot;, &quot;CT&quot;, &quot;CT&quot;, &quot;CT&quot;, &quot;CT&quot;, &quot;CT&quot;, &quot;CT&quot;, &quot;CT&quot;, &quot;C...
## $ ZIP         &lt;int&gt; 6519, 6232, 6340, 6103, 6050, 6410, 6413, 6415, 61...
## $ ZIPP4       &lt;int&gt; 1754, 1526, 6048, 1207, 2439, 2249, 2115, 1230, 16...</code></pre>
<hr />
<p>To find the latitude and longitude of an address, we need a full address like you would put into Google Maps. This data frame has a separate column for each piece of the address.</p>
<p>We need a single column for addresses, so we’ll concatenate <em>ADDRESS</em>, <em>CITY</em>, <em>STATE</em>, and <em>ZIP</em>.</p>
<div class="notices important" ><p>Did you notice the zip code is numeric and has only 4 digits out of 5 for zip code? That’s because Connecticut zip codes all start with 0. We’ll need to put that 0 back for the geocoding to work successfully.</p>
</div>

<pre class="r"><code>stations &lt;- stations %&gt;% 
  mutate(ZIP=paste0(&quot;0&quot;, as.character(ZIP))) %&gt;% 
  mutate(location = paste0(ADDRESS, &quot;, &quot;, CITY, &quot;, CT &quot;, ZIP))</code></pre>
<p>The function to geocode a single address is <code>geocode()</code> but we’ve got a bunch of addresses, so we can use <code>mutate_geocode()</code>.</p>
<pre class="r"><code>geo &lt;- mutate_geocode(stations, location)</code></pre>
<pre class="r"><code># If it&#39;s taking too long, you can cancel and load the output by uncommenting the line below
geo &lt;- read_csv(&quot;data/geo_stations.csv&quot;)

# Bringing over the longitude and latitude data
stations$lon &lt;- geo$lon
stations$lat &lt;- geo$lat</code></pre>
<p>This is using Google’s service, and last I checked there were about 2,500 queries allowed per day if you don’t have a key. If you do get a key, check out the documentation at the bottom of <a href="https://github.com/dkahle/ggmap">this page</a>.</p>
<p><strong>Also</strong> did you know that Google let’s you reverse geocode?</p>
<p>If you pass latitude and longitude data to <code>revgeocode()</code> it will return an address.</p>
<pre class="r"><code>revgeocode(c(lon = -77.030137, lat = 38.902986))</code></pre>
<pre><code>##   address
## 1      NA</code></pre>
</div>
<div id="plotting-points-with-ggplot2" class="section level3">
<h3>Plotting points with ggplot2</h3>
<p>Let’s pull town shapes for Connecticut with <strong>tigris</strong>.</p>
<pre class="r"><code># If you don&#39;t have tigris or ggplot2 or sf installed yet, uncomment and run the line below
#install.packages(&quot;tigris&quot;, &quot;sf&quot;, &quot;ggplot2&quot;)

library(tigris)
library(sf)
library(ggplot2)

# set sf option

options(tigris_class = &quot;sf&quot;)

ct &lt;- county_subdivisions(&quot;CT&quot;, cb=T)

#If cb is set to TRUE, download a generalized (1:500k) counties file. Defaults to FALSE (the most detailed TIGER file).

ggplot(ct) + 
  geom_sf() +
  theme_void() +
  theme(panel.grid.major = element_line(colour = &#39;transparent&#39;)) +
  labs(title=&quot;Connecticut towns&quot;)</code></pre>
<p><img src="/mapping/geolocating/2018-05-27-geolocating-data_files/figure-html/tigris_ct-1.png" width="672" /></p>
<p>Okay, we’ve got the shape file.</p>
<p>We just add the geolocated points like it was dots on a chart. Because that’s essentially what latitude and longitude is.</p>
<pre class="r"><code>ggplot(ct) + 
  geom_sf() +
  geom_point(data=stations, aes(x=lon, y=lat), color=&quot;blue&quot;) +
  theme_void() +
  theme(panel.grid.major = element_line(colour = &#39;transparent&#39;)) +
  labs(title=&quot;Police stations&quot;)</code></pre>
<p><img src="/mapping/geolocating/2018-05-27-geolocating-data_files/figure-html/map_chart-1.png" width="864" /></p>
<p>Alright, I’ll throw in grouping for Description.</p>
<p>And generate some random numbers for staffing for each station so we can make some circle plots.</p>
<pre class="r"><code>set.seed(7)

stations$staff &lt;- sample(200, size=nrow(stations), replace=T)

ggplot(ct) + 
  geom_sf(fill=&quot;transparent&quot;) +
  geom_point(data=stations, aes(x=lon, y=lat, size=staff, color=DESCRIPTION),  fill=&quot;white&quot;, shape=1) +
  theme_void() +
  theme(panel.grid.major = element_line(colour = &#39;transparent&#39;)) +
  labs(title=&quot;Police stations in Connecticut&quot;) +
  coord_sf()</code></pre>
<p><img src="/mapping/geolocating/2018-05-27-geolocating-data_files/figure-html/map_chart2-1.png" width="864" /></p>
<p>I also threw in <code>coord_sf()</code> in there at the end. It makes sures that all layer are using a common <em>CRS</em>. It sets it based on the first layer.</p>
<p>You can set other <a href="That%20https://ggplot2.tidyverse.org/reference/ggsf.html">projections</a> easily.</p>
<hr />
<p><span style="color:gray">© Copyright 2018, Andrew Ba Tran</span></p>
</div>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/en/mapping/static_maps/static-maps/" title="Static maps"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/en/mapping/case_study/traffic-stops/" title="Traffic stops case study" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1541338754"></script>
    <script src="/js/perfect-scrollbar.min.js?1541338754"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1541338754"></script>
    <script src="/js/jquery.sticky.js?1541338754"></script>
    <script src="/js/featherlight.min.js?1541338754"></script>
    <script src="/js/html5shiv-printshiv.min.js?1541338754"></script>
    <script src="/js/highlight.pack.js?1541338754"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js?1541338754"></script>
    <script src="/js/learn.js?1541338754"></script>
    <script src="/js/hugo-learn.js?1541338754"></script>

    <link href="/mermaid/mermaid.css?1541338754" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1541338754"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <p>© Copyright 2018, Andrew Tran</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-120594722-1', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>

